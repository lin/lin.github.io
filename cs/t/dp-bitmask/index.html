<!doctype html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>DP Bitmask - Yingkui</title><meta name=viewport content="width=device-width,initial-scale=1">
<meta itemprop=name content="DP Bitmask"><meta itemprop=description content="mask & (1<<j) # check mask ^ (1<<j) # remove mask | (1<<j) # set Arrangements max/min/cnt Min XOR sum def dp(mask, i): if i == n: return 0 res = inf for j in range(n): if mask & (1<<j): res = min(res, dp(mask ^ (1<<j), i + 1) + (nums1[i] ^ nums2[j])) return res return dp((1<<n) - 1, 0) Count def dfs(mask, prev): if mask == 0: return 1"><meta itemprop=wordCount content="167"><meta itemprop=keywords content><meta property="og:title" content="DP Bitmask"><meta property="og:description" content="mask & (1<<j) # check mask ^ (1<<j) # remove mask | (1<<j) # set Arrangements max/min/cnt Min XOR sum def dp(mask, i): if i == n: return 0 res = inf for j in range(n): if mask & (1<<j): res = min(res, dp(mask ^ (1<<j), i + 1) + (nums1[i] ^ nums2[j])) return res return dp((1<<n) - 1, 0) Count def dfs(mask, prev): if mask == 0: return 1"><meta property="og:type" content="article"><meta property="og:url" content="https://albert.cn/cs/t/dp-bitmask/"><meta property="article:section" content="cs"><meta name=twitter:card content="summary"><meta name=twitter:title content="DP Bitmask"><meta name=twitter:description content="mask & (1<<j) # check mask ^ (1<<j) # remove mask | (1<<j) # set Arrangements max/min/cnt Min XOR sum def dp(mask, i): if i == n: return 0 res = inf for j in range(n): if mask & (1<<j): res = min(res, dp(mask ^ (1<<j), i + 1) + (nums1[i] ^ nums2[j])) return res return dp((1<<n) - 1, 0) Count def dfs(mask, prev): if mask == 0: return 1"><link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel=stylesheet type=text/css><link rel=stylesheet type=text/css media=screen href=https://albert.cn/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://albert.cn/css/main.css><link id=dark-scheme rel=stylesheet type=text/css href=https://albert.cn/css/dark.css><link rel=stylesheet type=text/css href=https://albert.cn/css/custom.css><script src=https://albert.cn/js/feather.min.js></script><script src=https://albert.cn/js/main.js></script><link rel=stylesheet href=https://albert.cn/css/katex.min.css><script defer src=https://albert.cn/js/katex.min.js></script><script defer src=https://albert.cn/js/mhchem.min.js></script><script defer src=https://albert.cn/js/auto-render.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})})</script></head><body><div class="container wrapper"><div class=header><div class=avatar><a href=https://albert.cn/><img src=/logo-ai.jpg alt=Yingkui></a></div><h1 class=site-title><a href=https://albert.cn/>Yingkui</a></h1><div class=site-description><p>Getting Better. Getting Done.</p><nav class="nav social"><ul class=flat><li><a href=https://github.com/lin title=Github><i data-feather=github></i></a></li><li><a href=https://youtube.com/@yingkui title=YouTube><i data-feather=youtube></i></a></li></ul></nav></div><nav class=nav><ul class=flat><li><a href=/>随想</a></li><li><a href=/edu>教学</a></li><li><a href=/life>人生</a></li><li><a href=/games>游戏</a></li><li><a href=/about>关于</a></li></ul></nav></div><div class=post><div class=post-header><div class=matter><h1 class=title>DP Bitmask</h1></div></div><div class=markdown><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>mask <span style=color:#f92672>&amp;</span> (<span style=color:#ae81ff>1</span><span style=color:#f92672>&lt;&lt;</span>j) <span style=color:#75715e># check</span>
</span></span><span style=display:flex><span>mask <span style=color:#f92672>^</span> (<span style=color:#ae81ff>1</span><span style=color:#f92672>&lt;&lt;</span>j) <span style=color:#75715e># remove</span>
</span></span><span style=display:flex><span>mask <span style=color:#f92672>|</span> (<span style=color:#ae81ff>1</span><span style=color:#f92672>&lt;&lt;</span>j) <span style=color:#75715e># set</span>
</span></span></code></pre></div><h4 id=arrangements-maxmincnt>Arrangements max/min/cnt</h4><ul><li><a href=https://leetcode.com/contest/biweekly-contest-53/problems/minimum-xor-sum-of-two-arrays/>Min XOR sum</a></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>dp</span>(mask, i):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> i <span style=color:#f92672>==</span> n: 
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    res <span style=color:#f92672>=</span> inf
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> j <span style=color:#f92672>in</span> range(n):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> mask <span style=color:#f92672>&amp;</span> (<span style=color:#ae81ff>1</span><span style=color:#f92672>&lt;&lt;</span>j):
</span></span><span style=display:flex><span>            res <span style=color:#f92672>=</span> min(res, dp(mask <span style=color:#f92672>^</span> (<span style=color:#ae81ff>1</span><span style=color:#f92672>&lt;&lt;</span>j), i <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>) <span style=color:#f92672>+</span> (nums1[i] <span style=color:#f92672>^</span> nums2[j]))
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> res
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>return</span> dp((<span style=color:#ae81ff>1</span><span style=color:#f92672>&lt;&lt;</span>n) <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>)
</span></span></code></pre></div><ul><li><a href=https://leetcode.com/contest/weekly-contest-350/problems/special-permutations/>Count</a></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>dfs</span>(mask, prev):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> mask <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>: 
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    res <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(n):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> mask <span style=color:#f92672>&amp;</span> (<span style=color:#ae81ff>1</span> <span style=color:#f92672>&lt;&lt;</span> i) <span style=color:#f92672>and</span> (nums[i] <span style=color:#f92672>%</span> prev <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>or</span> prev <span style=color:#f92672>%</span> nums[i] <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>):
</span></span><span style=display:flex><span>            res <span style=color:#f92672>+=</span> dfs(mask <span style=color:#f92672>^</span> (<span style=color:#ae81ff>1</span> <span style=color:#f92672>&lt;&lt;</span> i), nums[i],)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> res
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>return</span> dfs((<span style=color:#ae81ff>1</span> <span style=color:#f92672>&lt;&lt;</span> n) <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>)
</span></span></code></pre></div><ul><li><a href=https://leetcode.com/problems/beautiful-arrangement/>Count</a></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>dp</span>(mask, cnt):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> mask <span style=color:#f92672>==</span> (<span style=color:#ae81ff>1</span> <span style=color:#f92672>&lt;&lt;</span> n) <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>: 
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    res <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(n):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> (mask <span style=color:#f92672>&amp;</span> (<span style=color:#ae81ff>1</span> <span style=color:#f92672>&lt;&lt;</span> i)) <span style=color:#f92672>and</span> (cnt <span style=color:#f92672>%</span> (i<span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>) <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>or</span> (i<span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>) <span style=color:#f92672>%</span> cnt <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>):
</span></span><span style=display:flex><span>            res <span style=color:#f92672>+=</span> dp(mask <span style=color:#f92672>|</span> (<span style=color:#ae81ff>1</span> <span style=color:#f92672>&lt;&lt;</span> i), cnt <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> res
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>return</span> dp(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>)
</span></span></code></pre></div></div><div class=tags></div></div></div><div class="footer wrapper"><nav class=nav><div>2023 © Copyright albert.cn / Yingkui.com All Rights Reserved</div></nav></div><script>feather.replace()</script></body></html>